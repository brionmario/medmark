<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How to create a blog in Gatsby with MDX</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How to create a blog in Gatsby with MDX</h1>
</header>
<section data-field="subtitle" class="p-summary">
In this post, I will go through the process of configuring a Gatsby application to be able to list out a blog index and render out MDX.
</section>
<section data-field="body" class="e-content">
<section name="93f5" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2818" id="2818" class="graf graf--h3 graf--leading graf--title">How to create a blog in Gatsby with¬†MDX</h3><p name="fc0f" id="fc0f" class="graf graf--p graf-after--h3">In this post, I will go through the process of configuring a Gatsby application to be able to list out a blog index and render out MDX.</p><h3 name="0b2d" id="0b2d" class="graf graf--h3 graf-after--p">TL;DR</h3><p name="f36c" id="f36c" class="graf graf--p graf-after--h3">I will be adding a blog feature to my <a href="https://github.com/brionmario/gatsby-starter" data-href="https://github.com/brionmario/gatsby-starter" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Gatsby starter</a> project based on the steps in this blog. And if you are impatient, check out <a href="https://github.com/brionmario/gatsby-starter/pull/9" data-href="https://github.com/brionmario/gatsby-starter/pull/9" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">this pull request</a> where I introduce the blog feature üòâ¬†.</p><h3 name="94ee" id="94ee" class="graf graf--h3 graf-after--p">Pre-requisites</h3><p name="a088" id="a088" class="graf graf--p graf-after--h3">In order to follow up with this blog, you‚Äôll need a Gatsby application. Read the <a href="https://www.gatsbyjs.com/docs/quick-start/" data-href="https://www.gatsbyjs.com/docs/quick-start/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">docs</a> to learn how to create a Gatsby app or choose any of the <a href="https://www.gatsbyjs.com/starters/?" data-href="https://www.gatsbyjs.com/starters/?" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">starters</a>.</p><p name="3765" id="3765" class="graf graf--p graf-after--p">As explained in TL;DR, I will be adding a blog feature to my Gatsby Starter and If you want to follow along, you can clone the repository and checkout to the commit <code class="markup--code markup--p-code">c621aed0cbd101e4910a8305d09d506817b59ac7</code>.</p><pre name="2618" id="2618" class="graf graf--pre graf-after--p">git clone <a href="https://github.com/brionmario/gatsby-starter.git" data-href="https://github.com/brionmario/gatsby-starter.git" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://github.com/brionmario/gatsby-starter.git</a></pre><pre name="0c75" id="0c75" class="graf graf--pre graf-after--pre">cd <a href="https://github.com/brionmario/gatsby-starter.git" data-href="https://github.com/brionmario/gatsby-starter.git" class="markup--anchor markup--pre-anchor" rel="nofollow noopener noopener" target="_blank">gatsby-starter</a></pre><pre name="e4e5" id="e4e5" class="graf graf--pre graf-after--pre">git checkout c621aed0cbd101e4910a8305d09d506817b59ac7</pre><h3 name="02f0" id="02f0" class="graf graf--h3 graf-after--pre">Let‚Äôs get¬†started</h3><p name="e303" id="e303" class="graf graf--p graf-after--h3">This will be my starting point. I have added a navigation item for the blog in the navbar and also created a basic page in <code class="markup--code markup--p-code">src</code> folder called <code class="markup--code markup--p-code">blog</code>.</p><figure name="be6b" id="be6b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*N8EhWzgtyz9SssAjqPmmcw.png" data-width="2430" data-height="2166" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*N8EhWzgtyz9SssAjqPmmcw.png"></figure><h4 name="71ac" id="71ac" class="graf graf--h4 graf-after--figure">Install core dependencies</h4><pre name="eb8e" id="eb8e" class="graf graf--pre graf-after--h4">npm install --save gatsby-plugin-mdx <a href="http://twitter.com/mdx" data-href="http://twitter.com/mdx" class="markup--anchor markup--pre-anchor" title="Twitter profile for @mdx" rel="noopener" target="_blank">@mdx</a>-js/mdx <a href="http://twitter.com/mdx" data-href="http://twitter.com/mdx" class="markup--anchor markup--pre-anchor" title="Twitter profile for @mdx" rel="noopener" target="_blank">@mdx</a>-js/react gatsby-plugin-page-creator <code class="markup--code markup--pre-code">gatsby-source-filesystem</code></pre><blockquote name="e64c" id="e64c" class="graf graf--blockquote graf-after--pre">If you are on a TypeScript project install <code class="markup--code markup--blockquote-code"><a href="https://www.npmjs.com/package/@types/mdx-js__react" data-href="https://www.npmjs.com/package/@types/mdx-js__react" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">@types/mdx-js__react</a></code> as a dev dependency to add typings support for MDX React package.</blockquote><h4 name="2e64" id="2e64" class="graf graf--h4 graf-after--blockquote"><strong class="markup--strong markup--h4-strong">Install image optimization dependencies</strong></h4><p name="4e8e" id="4e8e" class="graf graf--p graf-after--h4">The images in markdown are processed by <code class="markup--code markup--p-code"><a href="https://www.gatsbyjs.com/plugins/gatsby-remark-images/" data-href="https://www.gatsbyjs.com/plugins/gatsby-remark-images/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">gatsby-remark-images</a></code> plugins and it also adds responsiveness with a nice blurry loading animation.</p><p name="a9fc" id="a9fc" class="graf graf--p graf-after--p">The sharp plugins create <strong class="markup--strong markup--p-strong">ImageSharp</strong> nodes from images that are supported by the <a href="https://github.com/lovell/sharp" data-href="https://github.com/lovell/sharp" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Sharp</a> image processing library and let us access them via GraphQL.</p><pre name="7fda" id="7fda" class="graf graf--pre graf-after--p">npm install --save gatsby-remark-images gatsby-plugin-sharp gatsby-transformer-sharp</pre><h4 name="7155" id="7155" class="graf graf--h4 graf-after--pre">Add configurations</h4><p name="ae27" id="ae27" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">Configure file system plugins</strong></p><p name="4cbc" id="4cbc" class="graf graf--p graf-after--p">Since we need to create dynamic pages for our posts(MDX files), <code class="markup--code markup--p-code">gatsby-source-filesystem</code> &amp; <code class="markup--code markup--p-code">gatsby-plugin-page-creator</code> plugins have to be configured.</p><p name="778b" id="778b" class="graf graf--p graf-after--p">I‚Äôm planning to keep my posts inside a <code class="markup--code markup--p-code">src/blog</code> folder. <code class="markup--code markup--p-code">gatsby-source-filesystem</code> only creates pages for <code class="markup--code markup--p-code">src/pages</code> by default. So we need the support of <code class="markup--code markup--p-code">gatsby-plugin-page-creator</code> to achieve our target source. If you need to keep your blog posts elsewhere, more power to you üòõ.</p><figure name="053d" id="053d" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/brionmario/80ce6db7c9f92c02346934335a5205ff.js"></script><figcaption class="imageCaption">File System Plugins</figcaption></figure><p name="8490" id="8490" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Configure MDX plugin</strong></p><p name="05b5" id="05b5" class="graf graf--p graf-after--p">Now we need to configure the <code class="markup--code markup--p-code">gatsby-plugin-mdx</code> in <code class="markup--code markup--p-code">gatsby-config.js</code>.</p><figure name="288c" id="288c" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/brionmario/6bdf3f341e33e33e3c2c582c15494549.js"></script><figcaption class="imageCaption">MDX Plugin Configuration</figcaption></figure><p name="20fb" id="20fb" class="graf graf--p graf-after--figure">I have added the support for <code class="markup--code markup--p-code">md</code> and <code class="markup--code markup--p-code">markdown</code> extensions as well apart from the default <code class="markup--code markup--p-code">mdx</code>¬†.</p><p name="7338" id="7338" class="graf graf--p graf-after--p">Also, I have only added the <code class="markup--code markup--p-code">gatsby-remark-images</code> for now. But there are a number of nice remark plugins that you can use with <code class="markup--code markup--p-code">gatsby-plugin-mdx</code>¬†. Following are a few of them.</p><ol class="postList"><li name="3342" id="3342" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code"><a href="https://www.gatsbyjs.com/plugins/gatsby-remark-copy-linked-files/" data-href="https://www.gatsbyjs.com/plugins/gatsby-remark-copy-linked-files/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">gatsby-remark-copy-linked-files</a></code>¬†: Copies linked files.</li><li name="04e1" id="04e1" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><a href="https://www.gatsbyjs.com/plugins/gatsby-remark-autolink-headers/" data-href="https://www.gatsbyjs.com/plugins/gatsby-remark-autolink-headers/" class="markup--anchor markup--li-anchor" rel="nofollow noopener noopener" target="_blank">gatsby-remark-autolink-headers</a></code>¬†: Adds GitHub style link icon.</li><li name="8ef4" id="8ef4" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><a href="https://www.gatsbyjs.com/plugins/gatsby-remark-prismjs/" data-href="https://www.gatsbyjs.com/plugins/gatsby-remark-prismjs/" class="markup--anchor markup--li-anchor" rel="nofollow noopener noopener" target="_blank">gatsby-remark-prismjs</a></code>¬†: Adds syntax highlighting to code blocks.</li></ol><blockquote name="e6ab" id="e6ab" class="graf graf--blockquote graf-after--li">Click <a href="https://www.gatsbyjs.com/plugins/gatsby-plugin-mdx/#configuration" data-href="https://www.gatsbyjs.com/plugins/gatsby-plugin-mdx/#configuration" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">here</a> to check out more configuration options available in <code class="markup--code markup--blockquote-code">gatsby-plugin-mdx</code>¬†.</blockquote><p name="4f87" id="4f87" class="graf graf--p graf-after--blockquote"><strong class="markup--strong markup--p-strong">Configure Sharp plugins</strong></p><p name="a572" id="a572" class="graf graf--p graf-after--p">Add the following <code class="markup--code markup--p-code">sharp</code> plugin configuration to the config (<code class="markup--code markup--p-code">gatsby-config.js)</code>.</p><figure name="d27d" id="d27d" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/brionmario/2a91fa6ed881b36ddc7098f8b399b275.js"></script><figcaption class="imageCaption">Sharp Plugin Configuration</figcaption></figure><h4 name="6e05" id="6e05" class="graf graf--h4 graf-after--figure">Programmatically create pages for blog¬†posts</h4><p name="2cb6" id="2cb6" class="graf graf--p graf-after--h4">On the official Gatsby documentation page, there‚Äôs a detailed explanation of how this can be done. I will put the minimal changes that you need to get a blog up and running here. For detailed information, hop on to the <a href="https://www.gatsbyjs.com/docs/mdx/programmatically-creating-pages/" data-href="https://www.gatsbyjs.com/docs/mdx/programmatically-creating-pages/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">official docs</a> if needed.</p><p name="decd" id="decd" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Create Sample Blog Posts</strong></p><p name="45fc" id="45fc" class="graf graf--p graf-after--p">Since I chose to store my posts under <code class="markup--code markup--p-code">src/blog</code> when configuring the file system plugins in the earlier step, I will now create two folders to contain my two sample blog posts.</p><p name="de63" id="de63" class="graf graf--p graf-after--p">Following is the file structure I‚Äôm going to use.</p><pre name="fa73" id="fa73" class="graf graf--pre graf-after--p">src<br>|---blog<br>|    |---post-1<br>|          |---index.mdx<br>|    |---post-2<br>|          |---index.mdx</pre><p name="8a72" id="8a72" class="graf graf--p graf-after--pre">This is a sample MDX file that I created for posts. I‚Äôve just added <code class="markup--code markup--p-code">title</code>¬†, <code class="markup--code markup--p-code">slug</code> and <code class="markup--code markup--p-code">author</code> but you can add more as you please.</p><blockquote name="0cb9" id="0cb9" class="graf graf--blockquote graf-after--p"><code class="markup--code markup--blockquote-code">gatsby-plugin-mdx</code> automatically adds a <a href="https://developer.mozilla.org/en-US/docs/Glossary/Slug" data-href="https://developer.mozilla.org/en-US/docs/Glossary/Slug" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">slug</a> field to each MDX node. That usuallu doesn‚Äôt contain the full path and you have to construct it in the <code class="markup--code markup--blockquote-code">gatsby-node.js</code> file. Hence, I prefer to add it in the <code class="markup--code markup--blockquote-code">frontmatter</code>¬†.</blockquote><blockquote name="e0ff" id="e0ff" class="graf graf--blockquote graf-after--blockquote">NOTE: View the raw file to properly see the frontmatter.</blockquote><figure name="3e32" id="3e32" class="graf graf--figure graf--iframe graf-after--blockquote"><script src="https://gist.github.com/brionmario/c2600514c52e814102b5a946236882bf.js"></script><figcaption class="imageCaption">Sample MDX blog post</figcaption></figure><p name="79c3" id="79c3" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Create pages from MDX files</strong></p><p name="70a8" id="70a8" class="graf graf--p graf-after--p">Now we need to create pages for the above-created MDX files. For that, we need to edit the <code class="markup--code markup--p-code">gatsby-node.js</code> file.</p><figure name="222a" id="222a" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/brionmario/611e01509c2151150f62c019fb3b8bcf.js"></script><figcaption class="imageCaption">createPages function implementation</figcaption></figure><p name="4a75" id="4a75" class="graf graf--p graf-after--figure">In the <code class="markup--code markup--p-code">createPage</code> you can see that I‚Äôve pointed a template as the <code class="markup--code markup--p-code">component</code>. This is basically a layout for our blog posts. You can easily create a React component as you wish. Following is the one I created.</p><figure name="dcbe" id="dcbe" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/brionmario/54aaf2e19c523f2baeccca42c42f946b.js"></script><figcaption class="imageCaption">Basic Post Template Implementation</figcaption></figure><p name="cb8a" id="cb8a" class="graf graf--p graf-after--figure">Now let‚Äôs start the server and navigate first to the GraphQL dashboard.</p><blockquote name="f4f9" id="f4f9" class="graf graf--blockquote graf-after--p">Typically runs on <a href="http://localhost:8000/___graphql" data-href="http://localhost:8000/___graphql" class="markup--anchor markup--blockquote-anchor" rel="nofollow" target="_blank">http://localhost:8000/___graphql</a></blockquote><p name="68e0" id="68e0" class="graf graf--p graf-after--blockquote">Execute the following query and check the results.</p><figure name="8769" id="8769" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/brionmario/35af83031e9f0b3d982b85611cd7567a.js"></script><figcaption class="imageCaption">GraphQL Query</figcaption></figure><p name="a230" id="a230" class="graf graf--p graf-after--figure">You‚Äôll see something like the following. Play around and add anything you want to the <code class="markup--code markup--p-code">frontmatter</code> so that you can consume them in the template file.</p><figure name="6aec" id="6aec" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*px0soks_sucnmE90M7U5Yg.png" data-width="1184" data-height="1158" src="https://cdn-images-1.medium.com/max/800/1*px0soks_sucnmE90M7U5Yg.png"><figcaption class="imageCaption">GraphQL Query¬†Result</figcaption></figure><p name="25c5" id="25c5" class="graf graf--p graf-after--figure">If I navigate to <a href="http://localhost:8000/blog/post-1" data-href="http://localhost:8000/blog/post-1" class="markup--anchor markup--p-anchor" rel="nofollow" target="_blank">http://localhost:8000/blog/post-1</a> now, I can see the following üéâ.</p><figure name="ee9e" id="ee9e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*KL4o1Y2jdNGTYG_BDSVL4A.png" data-width="3828" data-height="2164" src="https://cdn-images-1.medium.com/max/800/1*KL4o1Y2jdNGTYG_BDSVL4A.png"><figcaption class="imageCaption">Sample Blog¬†Post</figcaption></figure><h4 name="a83a" id="a83a" class="graf graf--h4 graf-after--figure">Build a Blog¬†Index</h4><p name="8fe2" id="8fe2" class="graf graf--p graf-after--h4">Now that we have set up the base for the posts, let&#39;s add an index for the blogs page.</p><figure name="19e2" id="19e2" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/brionmario/1d1467dca6f243475865cc317ca71682.js"></script><figcaption class="imageCaption">Blog Index Implementation</figcaption></figure><figure name="5b6e" id="5b6e" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*n4BEim3Hn60BhYJa_VabfQ.png" data-width="3828" data-height="2170" src="https://cdn-images-1.medium.com/max/800/1*n4BEim3Hn60BhYJa_VabfQ.png"><figcaption class="imageCaption">Blog Index</figcaption></figure><h3 name="e79c" id="e79c" class="graf graf--h3 graf-after--figure">What‚Äôs Next!</h3><p name="4422" id="4422" class="graf graf--p graf-after--h3">Now that you have a base to proceed, you can let your imagination run wild and create your own design and implementation.</p><p name="e0f7" id="e0f7" class="graf graf--p graf-after--p">In case your blog posts have remote images, the <code class="markup--code markup--p-code">gatsby-node.js</code> file configuration will look a bit different. You will have to use <code class="markup--code markup--p-code"><em class="markup--em markup--p-em">createRemoteFileNode</em></code><em class="markup--em markup--p-em"> function from </em><code class="markup--code markup--p-code">gatsby-source-filesystem</code> module. Check out the implementation <a href="https://github.com/brionmario/gatsby-starter/blob/787e553c261965a9128b81c94c42446b698dcde6/gatsby-node.js" data-href="https://github.com/brionmario/gatsby-starter/blob/787e553c261965a9128b81c94c42446b698dcde6/gatsby-node.js" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a>.</p><p name="0d88" id="0d88" class="graf graf--p graf-after--p">And if you use Trypescript, you will have to add additional typings and also use the <code class="markup--code markup--p-code">createSchemaCustomization</code> function in the <code class="markup--code markup--p-code">gatsby-node.js</code> to extend frontmatter typings. Check out the <a href="https://github.com/brionmario/gatsby-starter/pull/9" data-href="https://github.com/brionmario/gatsby-starter/pull/9" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">finalized PR</a> to access the source code.</p><p name="5ca1" id="5ca1" class="graf graf--p graf-after--p">You‚Äôll end up with a result like below.</p><figure name="d166" id="d166" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*mqxJA0GfaKaiuuHNoetz_A.png" data-width="2052" data-height="2164" src="https://cdn-images-1.medium.com/max/800/1*mqxJA0GfaKaiuuHNoetz_A.png"><figcaption class="imageCaption">Blog Index</figcaption></figure><figure name="5664" id="5664" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*KIuC2QK_lcU4XDOUMF4e8A.png" data-width="2168" data-height="2162" src="https://cdn-images-1.medium.com/max/800/1*KIuC2QK_lcU4XDOUMF4e8A.png"><figcaption class="imageCaption">Blog Post</figcaption></figure><h3 name="5dc7" id="5dc7" class="graf graf--h3 graf-after--figure">Conclusion</h3><p name="824d" id="824d" class="graf graf--p graf-after--h3">Hope you found this blog post useful.</p><h4 name="6b73" id="6b73" class="graf graf--h4 graf-after--p">Links</h4><ul class="postList"><li name="52b4" id="52b4" class="graf graf--li graf-after--h4"><a href="https://github.com/brionmario/gatsby-starter/pull/9" data-href="https://github.com/brionmario/gatsby-starter/pull/9" class="markup--anchor markup--li-anchor" rel="nofollow noopener" target="_blank">https://github.com/brionmario/gatsby-starter/pull/9</a></li></ul><p name="eaf3" id="eaf3" class="graf graf--p graf-after--li graf--trailing">Signing off‚Ä¶ ‚úåÔ∏è‚ù§Ô∏è</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@brionmario" class="p-author h-card">Brion Mario</a> on <a href="https://medium.com/p/752e687e3ca0"><time class="dt-published" datetime="2022-01-29T12:41:32.434Z">January 29, 2022</time></a>.</p><p><a href="https://medium.com/@brionmario/how-to-create-a-blog-in-gatsby-with-mdx-and-import-your-medium-articles-part-1-752e687e3ca0" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on April 5, 2023.</p></footer></article></body></html>