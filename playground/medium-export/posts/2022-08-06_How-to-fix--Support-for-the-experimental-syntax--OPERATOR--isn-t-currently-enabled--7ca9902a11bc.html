<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How to fix â€œSupport for the experimental syntax &lt;OPERATOR&gt; isnâ€™t currently enabledâ€</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How to fix â€œSupport for the experimental syntax &lt;OPERATOR&gt; isnâ€™t currently enabledâ€</h1>
</header>
<section data-field="subtitle" class="p-summary">
Problem â“
</section>
<section data-field="body" class="e-content">
<section name="75e9" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="524d" id="524d" class="graf graf--h3 graf--leading graf--title">How to fix â€œSupport for the experimental syntax <code class="markup--code markup--h3-code">&lt;OPERATOR&gt;</code> isnâ€™t currently enabledâ€</h3><figure name="7cf3" id="7cf3" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*Y28_Yp7lfuaEdfM3OxPGmg.png" data-width="4152" data-height="1725" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*Y28_Yp7lfuaEdfM3OxPGmg.png"></figure><h3 name="3cf4" id="3cf4" class="graf graf--h3 graf-after--figure">Problem â“</h3><p name="b293" id="b293" class="graf graf--p graf-after--h3">I recently played around with the <a href="https://github.com/primer/doctocat-template" data-href="https://github.com/primer/doctocat-template" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">@primer/doctocat-template</a> <a href="https://www.gatsbyjs.com/docs/themes/" data-href="https://www.gatsbyjs.com/docs/themes/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Gatbsy theme</a> and encountered the following stack trace while building the repository.</p><figure name="0b0e" id="0b0e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*1jKbjnj1eatsiOqalGLA6g.png" data-width="2328" data-height="952" src="https://cdn-images-1.medium.com/max/800/1*1jKbjnj1eatsiOqalGLA6g.png"></figure><p name="8ce9" id="8ce9" class="graf graf--p graf-after--figure">It was originating from the <a href="https://www.npmjs.com/package/@primer/gatsby-theme-doctocat" data-href="https://www.npmjs.com/package/@primer/gatsby-theme-doctocat" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">@primer/gatsby-theme-doctocat</a> package which was listed as a dependency in the <code class="markup--code markup--p-code">@primer/doctocat-template</code><strong class="markup--strong markup--p-strong"> </strong>project.</p><h3 name="c61a" id="c61a" class="graf graf--h3 graf-after--p">Diagnosis â›‘</h3><p name="9cd0" id="9cd0" class="graf graf--p graf-after--h3">Upon inspection, I figured out that in the <a href="https://github.com/primer/doctocat/blob/%40primer/gatsby-theme-doctocat%404.0.0/theme/src/components/layout.js#L24" data-href="https://github.com/primer/doctocat/blob/%40primer/gatsby-theme-doctocat%404.0.0/theme/src/components/layout.js#L24" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">layout.js</a> in the <code class="markup--code markup--p-code">gatsby-theme-doctocat</code>Â , the developers have used the <code class="markup--code markup--p-code"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR_assignment" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR_assignment" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Logical Assignment</a></code> operator. Hence, the complaints from <a href="https://babeljs.io/" data-href="https://babeljs.io/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Babel</a>.</p><figure name="b921" id="b921" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/brionmario/e9068f0d33b2351465c77e5795b3e432.js"></script></figure><p name="cf4f" id="cf4f" class="graf graf--p graf-after--figure"><code class="markup--code markup--p-code"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR_assignment" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR_assignment" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Logical Assignment</a></code> seems to be a new proposal that requires an extra babel plugin called <code class="markup--code markup--p-code"><a href="https://babeljs.io/docs/en/babel-plugin-proposal-logical-assignment-operators" data-href="https://babeljs.io/docs/en/babel-plugin-proposal-logical-assignment-operators" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">@babel/plugin-proposal-logical-assignment-operators</a></code>Â .</p><p name="46b7" id="46b7" class="graf graf--p graf-after--p">The stack trace was really helpful in this scenario since it clearly mentioned what should be done to fix the problem.</p><p name="1c13" id="1c13" class="graf graf--p graf-after--p">When I checked inside the <a href="https://github.com/primer/doctocat/tree/%40primer/gatsby-theme-doctocat%404.0.0/theme" data-href="https://github.com/primer/doctocat/tree/%40primer/gatsby-theme-doctocat%404.0.0/theme" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">theme-package</a>, I couldnâ€™t find any <code class="markup--code markup--p-code">build</code> steps or <code class="markup--code markup--p-code">transpile</code> steps.</p><p name="a27c" id="a27c" class="graf graf--p graf-after--p">Also, someone had already opened up <a href="https://github.com/primer/doctocat-template/issues/35" data-href="https://github.com/primer/doctocat-template/issues/35" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">an issue</a> regarding the problem and the suggested solution to <code class="markup--code markup--p-code"><a href="https://babeljs.io/docs/en/babel-plugin-proposal-logical-assignment-operators" data-href="https://babeljs.io/docs/en/babel-plugin-proposal-logical-assignment-operators" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">@babel/plugin-proposal-logical-assignment-operators</a></code> package as a dev dependency did not fix it for me.</p><h3 name="56a8" id="56a8" class="graf graf--h3 graf-after--p">The CaveatÂ ğŸ¦„</h3><p name="002c" id="002c" class="graf graf--p graf-after--h3">The tricky thing here is that the problem lies in one of the dependencies of the template project. If this was origination from the source code of the project, we could have easily added the respective plugin inside aÂ <code class="markup--code markup--p-code">.babelrc</code> and get away with it.</p><h3 name="1c91" id="1c91" class="graf graf--h3 graf-after--p">Playing around with BabelÂ ğŸ§ª</h3><p name="075d" id="075d" class="graf graf--p graf-after--h3">Since the root cause seems to be related to the <code class="markup--code markup--p-code">Logical Assignment</code> operator transpilation, I decided to see if I can transpile the <code class="markup--code markup--p-code"><a href="https://www.npmjs.com/package/@primer/gatsby-theme-doctocat" data-href="https://www.npmjs.com/package/@primer/gatsby-theme-doctocat" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">@primer/gatsby-theme-doctocat</a></code> package from inside the template project.</p><p name="3d57" id="3d57" class="graf graf--p graf-after--p">Gatsby already ships with a default babel configuration and it looks to be aÂ <code class="markup--code markup--p-code">.babelrc</code> as per the <a href="https://www.gatsbyjs.com/docs/how-to/custom-configuration/babel/#how-to-use-a-custom-babelrc-file" data-href="https://www.gatsbyjs.com/docs/how-to/custom-configuration/babel/#how-to-use-a-custom-babelrc-file" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">official documentation</a>. Which usually skips <code class="markup--code markup--p-code">node_modules</code> from being transpiled.</p><p name="c8e2" id="c8e2" class="graf graf--p graf-after--p">For use-cases like this, there are two possible options as per my knowledge.</p><ol class="postList"><li name="bd66" id="bd66" class="graf graf--li graf-after--p">Extend the Gatsby webpack config and stop <code class="markup--code markup--li-code"><a href="https://www.npmjs.com/package/@primer/gatsby-theme-doctocat" data-href="https://www.npmjs.com/package/@primer/gatsby-theme-doctocat" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">@primer/gatsby-theme-doctocat</a></code> from being excluded from transpilation by <code class="markup--code markup--li-code"><a href="https://www.npmjs.com/package/babel-loader" data-href="https://www.npmjs.com/package/babel-loader" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">babel-loader</a></code> as explained <a href="https://www.gatsbyjs.com/docs/how-to/custom-configuration/add-custom-webpack-config/#modifying-the-babel-loader" data-href="https://www.gatsbyjs.com/docs/how-to/custom-configuration/add-custom-webpack-config/#modifying-the-babel-loader" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">here</a>.</li><li name="a06c" id="a06c" class="graf graf--li graf-after--li">Add a <code class="markup--code markup--li-code">babel.config.json</code> (not aÂ <code class="markup--code markup--li-code">.babelrc</code> check the NOTE below for info) at the root of the template so that Gatsby will pick that instead of the default.</li></ol><blockquote name="cf7e" id="cf7e" class="graf graf--blockquote graf-after--li">NOTE: A <code class="markup--code markup--blockquote-code">babel.config.json</code> should be used instead of aÂ <code class="markup--code markup--blockquote-code">.babelr</code> since we need the <code class="markup--code markup--blockquote-code">node_modules</code> to be transpiled as well. This is suggested for mono-repos in the <a href="https://babeljs.io/docs/en/configuration#whats-your-use-case" data-href="https://babeljs.io/docs/en/configuration#whats-your-use-case" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">Babel documentation</a>, but works in our favor in this scenario.</blockquote><p name="399a" id="399a" class="graf graf--p graf-after--blockquote">Since the second option seems to be a feasible easy solution, I decided to go ahead with that.</p><h3 name="e0cd" id="e0cd" class="graf graf--h3 graf-after--p">The FixÂ âš™ï¸</h3><ol class="postList"><li name="3a48" id="3a48" class="graf graf--li graf-after--h3">As per the instructions from the <a href="https://www.gatsbyjs.com/docs/how-to/custom-configuration/babel/#how-to-use-a-custom-babelrc-file" data-href="https://www.gatsbyjs.com/docs/how-to/custom-configuration/babel/#how-to-use-a-custom-babelrc-file" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">documentation</a>, I created a <code class="markup--code markup--li-code">babel.config.json</code> at the root of the template project.</li></ol><p name="aa2f" id="aa2f" class="graf graf--p graf-after--li">2. Installed <code class="markup--code markup--p-code"><a href="https://www.npmjs.com/package/@babel/plugin-proposal-logical-assignment-operators" data-href="https://www.npmjs.com/package/@babel/plugin-proposal-logical-assignment-operators" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">@babel/plugin-proposal-logical-assignment-operators</a></code> from npm.</p><figure name="495f" id="495f" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/brionmario/f66e8b1501b09de290ba8e192096d1c4.js"></script></figure><p name="712c" id="712c" class="graf graf--p graf-after--figure">3. Finally, I added <code class="markup--code markup--p-code"><a href="https://www.npmjs.com/package/@babel/plugin-proposal-logical-assignment-operators" data-href="https://www.npmjs.com/package/@babel/plugin-proposal-logical-assignment-operators" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">@babel/plugin-proposal-logical-assignment-operators</a></code>in the <code class="markup--code markup--p-code">plugins</code> array of the <code class="markup--code markup--p-code">babel.config.json</code>Â .</p><figure name="f9d2" id="f9d2" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/brionmario/2b2f2b1f6d34abbe5daa9e8e8f976f09.js"></script></figure><blockquote name="575e" id="575e" class="graf graf--pullquote graf-after--figure">Then I ran <code class="markup--code markup--pullquote-code">yarn build</code> from the root and et voila, SuccessÂ ğŸ‰.</blockquote><figure name="0d2f" id="0d2f" class="graf graf--figure graf-after--pullquote"><img class="graf-image" data-image-id="1*KvVfa28ArmwF7CaxDAfHVg.png" data-width="1940" data-height="2272" src="https://cdn-images-1.medium.com/max/800/1*KvVfa28ArmwF7CaxDAfHVg.png"></figure><h3 name="427d" id="427d" class="graf graf--h3 graf-after--figure">Contributing ğŸ™</h3><p name="6059" id="6059" class="graf graf--p graf-after--h3">Being a good citizen of the open-source community, I sent a pull request to the <a href="https://github.com/primer/doctocat-template" data-href="https://github.com/primer/doctocat-template" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">@primer/doctocat-template</a> repository, so that my fellow developers can kickstart their documentation journeys with this amazing template easily.</p><p name="c018" id="c018" class="graf graf--p graf-after--p">Pull Request: <a href="https://github.com/primer/doctocat-template/pull/41" data-href="https://github.com/primer/doctocat-template/pull/41" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://github.com/primer/doctocat-template/pull/41</a></p><p name="50ab" id="50ab" class="graf graf--p graf-after--p graf--trailing">Signing offâ€¦ âœŒï¸â¤ï¸</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@brionmario" class="p-author h-card">Brion Mario</a> on <a href="https://medium.com/p/7ca9902a11bc"><time class="dt-published" datetime="2022-08-06T10:25:19.278Z">August 6, 2022</time></a>.</p><p><a href="https://medium.com/@brionmario/how-to-fix-support-for-the-experimental-syntax-operator-isn-t-currently-enabled-7ca9902a11bc" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on April 5, 2023.</p></footer></article></body></html>